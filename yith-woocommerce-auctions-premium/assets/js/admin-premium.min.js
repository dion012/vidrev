jQuery(function(t){t("#reshedule_button").on("click",function(){t("#yith_auction_settings").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a={id:object.id,security:object.reschedule_product,action:"yith_wcact_reshedule_product"};t.ajax({type:"POST",data:a,url:object.ajaxurl,success:function(a){t("#yith_auction_settings").unblock(),t("#reshedule_button").hide(),t("#yith-reshedule-notice-admin").show(),t("#_stock_status").val("instock")},complete:function(){}})}),t(document).on("click",".yith-wcact-delete-bid",function(a){if(a.preventDefault(),t("#yith-wcgpf-auction-bid-list").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),window.confirm(object.confirm_delete_bid)){var c={user_id:t(this).data("user-id"),product_id:t(this).data("product-id"),date:t(this).data("date-time"),bid:t(this).data("bid"),delete_id:t(this).data("delete-id"),security:object.delete_bid,action:"yith_wcact_delete_customer_bid"};t.ajax({type:"POST",data:c,url:object.ajaxurl,success:function(c){current_target=t(a.target),parent=current_target.closest(".yith-wcact-row"),parent.remove(),t("#yith-wcgpf-auction-bid-list").unblock()},complete:function(){}})}else t("#yith-wcgpf-auction-bid-list").unblock()}),t(document.body).on("yith_wcact_send_winner_email_button",function(){t("#yith-wcact-send-winner-email").on("click",function(){t(".yith-wcact-admin-auction-status").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a={id:object.id,action:"yith_wcact_resend_winner_email"};t.ajax({type:"POST",data:a,url:object.ajaxurl,success:function(a){t(".yith-wcact-admin-auction-status").empty(),t(".yith-wcact-admin-auction-status").html(a.resend_winner_email),t(document.body).trigger("yith_wcact_send_winner_email_button"),t(".yith-wcact-admin-auction-status").unblock()},complete:function(){}})})}),t(document.body).trigger("yith_wcact_send_winner_email_button"),t(document).find("._tax_status_field").closest("div").addClass("show_if_auction"),t("select#product-type").trigger("change"),object.auction_by_default&&(t("#product-type").val("auction").trigger("change"),t(".yith_Auction_options a").trigger("click"));var a,c,e=t("#product-type"),i=!1,n=[];function o(){t(".ywcact-bid-increment-row").each(function(a){let c=t(this).find("input");t(c).each(function(c){let e=t(this).data("input-type");t(this).attr("name","ywcact_automatic_bid_advanced["+a+"]["+e+"]")})})}function s(a,c){a.each(function(a){c?t(this).closest(".yith-plugin-fw-panel-wc-row").hide():t(this).closest(".yith-plugin-fw-panel-wc-row").show()})}isAuction=function(){return"auction"===e.val()},dataValidation=function(){var a=!0;return t(".ywcact-data-validation").each(function(){var c=t(this).data("validation"),e=t(this).data("title-field");switch(c){case"has_value":t(this).val()||(t(this).addClass("ywcact-data-validation-error"),n.push(e),a=!1);break;case"has_dependencies":var i=t(this).data("dependency"),o=t(this).data("value");t(i).val()!==o||t(this).val()||(t(this).addClass("ywcact-data-validation-error"),n.push(e),a=!1)}}),a},checkForFields=function(){var a=!1;if("publish"===t("input[type=submit][ywcact-clicked=true]").attr("id")){var c=t("#original_post_status").val(),e=t("#post_status").val();"publish"===c&&"publish"===e?a=!0:"draft"!==c&&"auto-draft"!==c||(a=!0)}return a},notice_reset=function(){t(".ywcact-notice").remove(),t(".ywcact-data-validation-error").removeClass("ywcact-data-validation-error"),n=[]},t("#post").on("submit",function(a){if(isAuction()&&!i&&checkForFields())if(notice_reset(),dataValidation())i=!0,t("#publish").trigger("click");else{a.preventDefault();var c=object.error_validation,e=n.length,o="",s=0;n.forEach(function(t,a,c){console.log(t);var i=++s===e?"":", ";o=o+t+i}),console.log(o);var r=c.replace("%s",o);t("<div class='ywcact-notice ywcact-notice-error'><p><span class=\"dashicons dashicons-warning\"></span><span class='ywcact-notice-error-message'>"+r+"</span></p></div>").insertBefore(t("div.wrap #poststuff"))}}),t("#post input[type=submit]").click(function(){t("input[type=submit]",t(this).parents("form")).removeAttr("ywcact-clicked"),t(this).attr("ywcact-clicked","true")}),t("input[name='yith_wcact_settings_automatic_bid_type']").on("click",function(){switch(this.value){case"simple":t(".ywcact-automatic-bid-increment-simple").removeClass("ywcact-hide"),t(".ywcact-automatic-bid-increment-simple").addClass("ywcact-show"),t(".ywcact-automatic-bid-increment-advanced").removeClass("ywcact-show"),t(".ywcact-automatic-bid-increment-advanced").addClass("ywcact-hide");break;case"advanced":t(".ywcact-automatic-bid-increment-simple").removeClass("ywcact-show"),t(".ywcact-automatic-bid-increment-simple").addClass("ywcact-hide"),t(".ywcact-automatic-bid-increment-advanced").removeClass("ywcact-hide"),t(".ywcact-automatic-bid-increment-advanced").addClass("ywcact-show")}}),t(".ywcact-add-rule").on("click",function(a){let c=t(".ywcact-automatic-bid-increment-advanced-rule:last").clone().css({display:"none"}),e=t(".ywcact-bid-increment-row").length;c.find("input").val(""),c.insertBefore(t(".ywcact-automatic-bid-increment-advanced-end")),c.removeClass("ywcact-hide"),c.addClass("ywcact-bid-increment-row"),t(c).find(".ywcact-remove-rule").bind("click",function(){c.remove(),o()});let i=t(c).find("input"),n=parseInt(e)-1;t(i).each(function(a){let c=t(this).data("input-type");t(this).attr("name","ywcact_automatic_bid_advanced["+n+"]["+c+"]")});let s=t(".ywcact-automatic-bid-increment-advanced-end"),r=t(s).find("input");t(r).each(function(a){let c=t(this).data("input-type");t(this).attr("name","ywcact_automatic_bid_advanced["+e+"]["+c+"]")}),c.fadeTo(400,1,function(){c.css({display:"block"})})}),t(".ywcact-remove-rule").on("click",function(){t(this).closest(".ywcact-automatic-bid-increment-advanced-rule").remove(),o()}),t("#yith_wcact_settings_tab_auction_allow_subscribe").on("change",function(){"no"===t(this).val()&&"yes"===t("#yith_wcact_show_privacy_field").val()?t(".yith_wcact_privacy_fields").closest(".yith-plugin-fw-panel-wc-row").hide():"yes"===t(this).val()&&t("#yith_wcact_show_privacy_field").trigger("change")}),t(document).on("click","#yith-auction-list-table #search-submit, #yith-auction-list-table #post-query-submit",function(t){window.onbeforeunload=null}),t(".yith-auction-non-start").each(function(){t(this).parents("tr").css("background-color","#FFF8F2")}),t(document).on("click",".yith-wcact-auction-bidders-button",function(a){a.preventDefault();var c={product_id:t(this).data("product_id"),bidders_count:t(this).data("bids"),action:"yith_wcact_load_bidders_table",security:object.display_bids};t.ajax({type:"POST",data:c,url:object.ajaxurl,success:function(t){yith.ui.modal({title:t.title,content:t.content,width:800,classes:{wrap:"yith-wcact-list-bids-wrapper-modal",main:"yith-wcact-main-list-bids-wrapper-modal",content:"yith-wcact-content-list-bids-wrapper-modal"}})},complete:function(){}})}),t(document).on("click",".yith-wcact-pagination-section .page-numbers",function(a){a.preventDefault();const c=t(".yith-wcact-content-list-bids-wrapper-modal"),e=c.find(".yith-wcact-pagination-section").data("current-page");var i=1;c.addClass("loading"),c.block({message:null,overlayCSS:{background:"#fff url("+object.loader+") no-repeat center",opacity:.5,cursor:"none"}}),i=t(this).hasClass("next")?e+1:t(this).hasClass("prev")?e-1:t(this).text();var n={product_id:t("#yith-wcact-product-id").val(),bidders_count:t("#yith-wcact-bids-count").val(),current_page:i,action:"yith_wcact_load_bidders_table",security:object.display_bids};t.ajax({type:"POST",data:n,url:object.ajaxurl,success:function(t){t&&(c.empty(),c.append(t.content)),c.unblock()},complete:function(){}})}),a=object.stripe_enabled,c={charge_automatically:t(".yith-wcact-deps-charge-automatically"),winner_create_order:t(".yith-wcact-deps-winner-create-order")},a?(t("#yith_wcact_stripe_charge_automatically_price").on("change",function(){s(c.charge_automatically,"yes"===t(this).val()&&"yes"===t("#yith_wcact_verify_payment_method").val())}).trigger("change"),t("#yith_wcact_verify_payment_method").on("change",function(){s(c.charge_automatically,"yes"===t(this).val()&&"yes"===t("#yith_wcact_stripe_charge_automatically_price").val())}).trigger("change"),t("#yith_wcact_auction_winner_create_order").on("change",function(){s(c.winner_create_order,"yes"===t(this).val())}).trigger("change")):(t("#yith_wcact_auction_winner_create_order").on("change",function(){s(c.winner_create_order,"yes"===t(this).val())}).trigger("change"),t("#yith_wcact_auction_reschedule_how_to_not_paid_stripe").closest(".yith-plugin-fw-panel-wc-row").hide())});