jQuery(function(t){var a;function e(c,e,n){if(n=void 0===n||n,c<=0)clearInterval(a),n&&location.reload();else{var o=parseInt(e.data("last-minute"));o>0&&!e.hasClass("yith-wcact-countdown-last-minute")&&c<o&&e.addClass("yith-wcact-countdown-last-minute");var r=Math.floor(c),d=Math.floor(r/60),s=Math.floor(d/60),l=Math.floor(s/24);if(s%=24,d%=60,r%=60,l=i(1,l),s=i(1,s),d=i(1,d),r=i(1,r),e.hasClass("yith-wcact-timeleft-small-blocks")){var u=r.toString().split(""),_=d.toString().split(""),m=s.toString().split(""),h=l.toString().split("");r="",d="",s="",l="",t.each(u,function(t,a){r+="<span class='small-block-content' style='border: 1px solid #A3A3A3;padding: 0px 6px;margin:0px 2px;display: initial;background: "+ywcact_frontend_object.small_blocks_background_color+";'>"+a+"</span>"}),t.each(_,function(t,a){d+="<span class='small-block-content' style='border: 1px solid #A3A3A3;padding: 0px 6px;margin:0px 2px;display: initial;background: "+ywcact_frontend_object.small_blocks_background_color+";'>"+a+"</span>"}),t.each(m,function(t,a){s+="<span class='small-block-content' style='border: 1px solid #A3A3A3;padding: 0px 6px;margin:0px 2px;display: initial;background: "+ywcact_frontend_object.small_blocks_background_color+";'>"+a+"</span>"}),t.each(h,function(t,a){l+="<span class='small-block-content' style='border: 1px solid #A3A3A3;padding: 0px 6px;margin:0px 2px;display: initial;background: "+ywcact_frontend_object.small_blocks_background_color+";'>"+a+"</span>"})}t("#days",e).html(l),t("#hours",e).html(s),t("#minutes",e).html(d),t("#seconds",e).html(r),t(document.body).trigger("yith_wcact_update_timer",[e])}}function i(t,a){return a.toString().length<=t?i(t,"0"+a):a}t(document.body).on("yith_wcact_timer",function(){var c=0;a=setInterval(function(){t(".yith-wcact-timer-auction").not(".ywcact-timer-finished").each(function(a){var i=t(this),n=parseInt(t(this).data("finish-time")),o=new Date(0);o.setUTCSeconds(n);var r=o.getTime()/1e3,d=parseInt(t(this).data("current-time")),s=r-(c=c>d?c:d);if(s>=0){if(e(s,i),i.data("remaining-time",s),i.hasClass("yith-wcact-timeleft-compact")&&(t(".yith-wcact-number-label",i).each(function(a){var c=t(this).text().substring(0,1);t(this).text(c)}),i.hasClass("yith-wcact-timeleft-product-page"))){var l=t(".yith_auction_datetime_shop",i).text();t("#auction_end",i).text(""),t(".yith-wcact-timeleft-compact",i).append("("+l+")")}}else i.addClass("ywcact-timer-finished"),i.removeClass("yith-wcact-timer-auction"),i.closest(".yith-wcact-time-left-main").hasClass("yith-wcact-time-left-main")?e(s,i,!0):e(1,i)}),c+=1},1e3)}).trigger("yith_wcact_timer");var n=t("#time").data("current");function o(a){t("#yith-wcact-form-bid").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var c=a.closest(".cart"),e={bid:c.find("#_actual_bid").val(),product:c.find("#time").data("product"),currency:t("#yith_wcact_currency").val(),return_url:ywcact_frontend_object.return_form_url,security:ywcact_frontend_object.add_bid,action:"yith_wcact_add_bid"};t(document.body).trigger("yith_wcact_before_send_bid",[a]),r(c.find("#_actual_bid"),ywcact_frontend_object.bid_empty_error)?t.ajax({type:"POST",data:e,url:ywcact_frontend_object.ajaxurl,success:function(a){t("#yith-wcact-form-bid").unblock(),window.location=a.url},complete:function(){}}):t("#yith-wcact-form-bid").unblock()}function r(a,c){var e=!0;return a.val()||(t(a).css("border-color","red"),t(".yith-wcact-error").hide(),t(a).closest(".ywcact-bid-form").after("<small class='yith-wcact-error'>"+c+"</small>"),e=!1),e}if(t(".bid").click(function(a){a.preventDefault();var c=t("#_actual_bid").val();t(this).hasClass("button_bid_add")?(c||(c=n),""===c&&(c=0),c=parseInt(c)+parseInt(date_params.actual_bid_add_value),t("#_actual_bid").val(c)):c&&((c=parseInt(c)-parseInt(date_params.actual_bid_add_value))>=n?t("#_actual_bid").val(c):t("#_actual_bid").val(n))}),t(document).off("click",".auction_bid").on("click",".auction_bid",function(a){o(t(this))}),t("#_actual_bid").keydown(function(t){13==t.which&&t.preventDefault()}),t(".yith_auction_datetime").each(function(a){var c=s(t(this).text());t(this).text(c)}),t(".yith_auction_datetime_shop").each(function(a){var e=parseInt(t(this).data("finnish-shop")),i=new Date;c=i.getTime()/1e3;var n=new Date(0);n.setUTCSeconds(e),string=d(n),t(this).text(string)}),ywcact_frontend_object.live_auction_product_page>0){setInterval(function(){!function(){t("#tab-yith-wcact-bid-tab").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a={security:ywcact_frontend_object.update_list_bids,product:t(":hidden#yith-wcact-product-id").val(),currency:t("#yith_wcact_currency").val(),action:"yith_wcact_update_list_bids"};t.ajax({type:"POST",data:a,url:ywcact_frontend_object.ajaxurl,success:function(a){if(0!=a&&(t(".yith-wcact-table-bids").empty(),t(".yith-wcact-table-bids").html(a.list_bids),t(".yith_auction_datetime").each(function(a){var c=s(t(this).text());t(this).text(c)}),t("#tab-yith-wcact-bid-tab").unblock(),t("p.price span:first-child").html(a.current_bid),t("#yith-wcact-max-bidder").empty(),t("#yith-wcact-max-bidder").html(a.max_bid),t("#yith_wcact_reserve_and_overtime").empty(),t("#yith_wcact_manual_bid_increment").empty(),t("#yith_wcact_reserve_and_overtime").html(a.reserve_price_and_overtime),ywcact_frontend_object.ajax_activated&&"timeleft"in a)){t("#timer_auction").data("finish",a.new_end_date),t("#timer_auction").data("finish-time",a.new_end_date);var c=parseInt(t("#timer_auction").data("finish")),e=new Date(0);e.setUTCSeconds(c),string=d(e),t("#dateend").text(string)}},complete:function(){}})}()},ywcact_frontend_object.live_auction_product_page)}function d(t){var a=date_params.format,c=t.getDate(),e=("0"+c).slice(-2),i=t.getMonth()+1,n=("0"+i).slice(-2),o=t.getFullYear().toString().substr(-2),r=t.getFullYear(),d=t.getHours(),s=d%12,l=d<12?"am":"pm",u=d<12?"AM":"PM",_=("0"+d).slice(-2),m=("0"+s).slice(-2),h=("0"+t.getMinutes()).slice(-2),p=("0"+t.getSeconds()).slice(-2);return a=a.replace(/d|j|n|m|M|F|Y|y|h|H|i|s|a|A|G|g|/g,function(t){var a=t;switch(t){case"d":a=e;break;case"j":a=c;break;case"n":a=i;break;case"m":a=n;break;case"M":a=date_params.month_abbrev[date_params.month[n]];break;case"F":a=date_params.month[n];break;case"Y":a=r;break;case"y":a=o;break;case"h":"00"==m&&(m="12"),a=m;break;case"H":a=_;break;case"i":a=h;break;case"s":a=p;break;case"a":a=date_params.meridiem[l];break;case"A":a=date_params.meridiem[u];break;case"g":0==s&&(s=12),a=s;break;case"G":a=d}return a})}function s(t){var a=t;return a=(a+=" UTC").replace(/-/g,"/"),d(new Date(a))}t(document).on("yith_infs_added_elem",function(){t(".date_auction").each(function(a){parseInt(t(this).data("yith-product"));var e=parseInt(t(this).data("yith-auction-time")),i=new Date;c=i.getTime()/1e3;c;var n=new Date(0);n.setUTCSeconds(e),string=d(n),t(this).text(string)})}),t(document).trigger("yith_infs_added_elem"),t(document).on("click",".ywcact-auction-confirm",function(a){var c=t(this).closest(".cart").find("#_actual_bid");r(c,ywcact_frontend_object.bid_empty_error)&&(t(".ywcact-bid-popup-value").html(c.val()),t(".yith-wcact-confirmation-bid").click())}),t(document).on("click",".ywcact-auction-fee-confirm",function(a){t(".ywcact-fee-amount-container").trigger("click")}),t(document).on("yith_ywcact_popup_template_loaded",function(a,c,e){t(".ywcact-modal-button-confirm-bid").on("click",function(a){e.opened&&(t(".yith-ywcact-popup-wrapper .yith-ywcact-popup-close").click(),o(t(".ywcact-auction-confirm")))}),t(".ywcact-modal-button-pay-fee").on("click",function(a){e.opened&&function(){t(".yith-ywcact-popup-wrapper").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var a={fee_price:t("input[name='yith-wcact-pay-fee-auction-value']").val(),product_id:t("#time").data("product"),security:ywcact_frontend_object.add_bid,action:"yith_wcact_pay_fee"};t.ajax({type:"POST",data:a,url:ywcact_frontend_object.ajaxurl,success:function(a){t(".yith-ywcact-popup-wrapper").unblock(),window.location=a.cart_url},complete:function(){}})}()})}),t(document).on("click",".add_to_watchlist",function(a){a.preventDefault();var c=t(".ywcact-add-to-watchlist-container");c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e={product_id:t(this).data("product-id"),user_id:t(this).data("user-id"),action:"yith_wcact_add_to_watchlist",security:ywcact_frontend_object.add_bid};t.ajax({type:"POST",data:e,url:ywcact_frontend_object.ajaxurl,success:function(a){if(a){if(a.url)return void(window.location=a.url);t(document).trigger("yith_ywcact_update_wishlist",[t(this),e,"add_watchlist"]),c.html(a.template_watchlist_button)}c.unblock()},complete:function(){}})}),t(document).on("click",".remove_from_watchlist",function(a){a.preventDefault();var c=t(".ywcact-add-to-watchlist-container");c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e={product_id:t(this).data("product-id"),user_id:t(this).data("user-id"),security:ywcact_frontend_object.add_bid,action:"yith_wcact_remove_from_watchlist"};t.ajax({type:"POST",data:e,url:ywcact_frontend_object.ajaxurl,success:function(a){a&&(t(document).trigger("yith_ywcact_update_wishlist",[t(this),e,"remove_watchlist"]),c.html(a.template_watchlist_button)),c.unblock()},complete:function(){}})}),t(document).on("yith_ywcact_update_wishlist",function(c,e,i,n){if("undefined"!==i.user_id){var o={user_id:i.user_id,action:"yith_wcact_get_watchlist_fragment_products",security:ywcact_frontend_object.add_bid};t.ajax({type:"POST",data:o,url:ywcact_frontend_object.ajaxurl,success:function(c){if(c){t(".ywcact-watchlist-widget-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t(".ywcact-watchlist-widget-content .list").html(c.fragmets_watchlist_product),"add_watchlist"==n&&t(".ywcact-watchlist-widget-content .list").each(function(){t(this).find(".yith-wcact-timer-auction").each(function(){var a=t(this).data("remaining-time");t(document).find("[data-product-id='"+i.product_id+"']").data("remaining-time",a)})}),clearInterval(a),t(document.body).trigger("yith_wcact_timer");var e=t(".ywcact-watchlist-container-list").data("watchlist-product-counter"),o=t(".ywcact-watchlist-widget-content .items-count").html();o=e>=10?o.substring(2):undefined===o?"1":o.substring(1),t(".items-count").html(e),t(".ywcact-watchlist-widget-content .items-count").html(e+o),t(".ywcact-watchlist-widget-content").unblock()}},complete:function(){}})}})});